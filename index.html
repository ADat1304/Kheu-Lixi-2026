<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NuÃ´i TÃ´i ğŸœ</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #d32f2f;
            --secondary: #ffc107;
            --accent: #ffd700;
            --dark: #3e2723;
            --light: #fff8e1;
            --gradient: linear-gradient(135deg, #d32f2f 0%, #b71c1c 100%);
            --glass: rgba(255, 255, 255, 0.1);
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background: #800000;
            min-height: 100vh;
            overflow-x: hidden;
            color: white;
            position: relative;
        }

        /* Festive Background Elements */
        .festive-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
            overflow: hidden;
        }

        /* Top Flowers */
        .flower-top {
            position: absolute;
            top: -20px;
            width: 250px;
            z-index: 2;
        }

        .flower-left {
            left: -50px;
            transform: rotate(-10deg);
        }

        .flower-right {
            right: -50px;
            transform: scaleX(-1) rotate(-10deg);
        }

        .flower-center {
            left: 50%;
            transform: translateX(-50%);
            width: 400px;
            top: -50px;
        }

        /* Hanging Lanterns */
        .lantern-container {
            position: absolute;
            top: 0;
            width: 100%;
            display: flex;
            justify-content: space-around;
            padding: 0 10%;
            z-index: 1;
        }

        .lantern {
            width: 120px;
            animation: swing 3s ease-in-out infinite alternate;
            transform-origin: top center;
        }

        /* Background Floral Branch */
        .branch-bg {
            position: absolute;
            top: 20%;
            left: 50%;
            transform: translateX(-50%);
            width: 90%;
            max-width: 600px;
            opacity: 0.8;
            z-index: 0;
        }


        @keyframes swing {
            from {
                transform: rotate(-5deg);
            }

            to {
                transform: rotate(5deg);
            }
        }

        /* Falling Effects */
        .falling-element {
            position: fixed;
            top: -100px;
            pointer-events: none;
            z-index: 5;
            animation: fall linear forwards;
        }


        .lixi-icon {
            font-size: 2rem;
            filter: drop-shadow(2px 2px 5px rgba(0, 0, 0, 0.2));
        }

        @keyframes fall {
            0% {
                transform: translateY(0) translateX(0) rotate(0deg);
                opacity: 0;
            }

            10% {
                opacity: 1;
            }

            90% {
                opacity: 1;
            }

            100% {
                transform: translateY(110vh) translateX(var(--drift)) rotate(var(--rotation));
                opacity: 0;
            }
        }

        /* Profile & Content Cards Overhaul */
        .profile-section {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
            margin-top: 10px;
            /* Space for lanterns/flowers */
        }

        .avatar-card {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 20px;
            border: 1px solid rgba(255, 215, 0, 0.3);
            width: 180px;
            text-align: center;
        }

        .avatar-img {
            width: 140px;
            height: 140px;
            border-radius: 15px;
            object-fit: cover;
        }

        .content-card {
            background: rgba(245, 222, 179, 0.85);
            /* Light yellow glass */
            backdrop-filter: blur(10px);
            border-radius: 30px;
            padding: 20px 30px 30px;
            width: 90%;
            max-width: 450px;
            color: #1a1a1a;
            position: relative;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            font-size: 1.1rem;
            line-height: 1.4;
            font-style: italic;
            font-weight: 500;
            border: 1px solid rgba(255, 215, 0, 0.3);
        }

        .card-toolbar {
            display: flex;
            align-items: center;
            gap: 6px;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(26, 26, 26, 0.1);
        }

        .toolbar-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
        }

        .dot-red {
            background: #ff5f56;
        }

        .dot-yellow {
            background: #ffbd2e;
        }

        .dot-green {
            background: #27c93f;
        }

        .content-card ul {
            list-style: none;
            margin-top: 10px;
        }

        .content-card li {
            position: relative;
            padding-left: 20px;
            margin-bottom: 5px;
        }

        .content-card li::before {
            content: 'â€¢';
            position: absolute;
            left: 0;
            color: #1a1a1a;
        }

        .lixi-text {
            text-align: center;
            margin: 20px 0;
            font-style: italic;
            font-weight: 500;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
        }

        /* LÃ¬ XÃ¬ Button */
        .lixi-footer {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .envelope-img {
            width: 50px;
        }

        .lion-head-img {
            width: 80px;
        }

        .lixi-btn {
            background: #5d2b2b;
            color: white;
            padding: 12px 40px;
            border-radius: 25px;
            border: none;
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            transition: transform 0.2s;
        }

        .lixi-btn:hover {
            transform: scale(1.05);
        }

        /* Header */
        .header {
            text-align: center;
            padding: 40px 20px;
            position: relative;
            z-index: 1;
        }

        .logo {
            font-size: 4rem;
            margin-bottom: 10px;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {

            0%,
            100% {
                transform: translateY(0);
            }

            50% {
                transform: translateY(-20px);
            }
        }

        .title {
            font-size: 3.5rem;
            font-weight: 700;
            color: white;
            text-shadow: 3px 3px 0 var(--primary), 6px 6px 0 rgba(0, 0, 0, 0.1);
            margin-bottom: 10px;
        }

        .subtitle {
            font-size: 1.3rem;
            color: rgba(255, 255, 255, 0.9);
            font-weight: 500;
        }

        .strike {
            text-decoration: line-through;
            opacity: 0.7;
        }

        /* Main container */
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 1;
        }

        /* Profile card */
        .profile-card {
            background: var(--glass);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 30px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            margin-bottom: 30px;
            position: relative;
            overflow: hidden;
        }

        .profile-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 150px;
            background: linear-gradient(135deg, rgba(211, 47, 47, 0.5) 0%, rgba(183, 28, 28, 0.5) 100%);
        }

        .avatar-container {
            position: relative;
            width: 150px;
            height: 150px;
            margin: 0 auto 20px;
            z-index: 1;
        }

        .avatar {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            border: 5px solid white;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            object-fit: cover;
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 4rem;
        }

        .status-badge {
            position: absolute;
            bottom: 5px;
            right: 5px;
            background: #00b894;
            color: white;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            border: 3px solid white;
        }

        .profile-name {
            font-size: 2rem;
            font-weight: 700;
            color: white;
            text-align: center;
            margin-bottom: 5px;
        }

        .profile-tagline {
            text-align: center;
            color: rgba(255, 255, 255, 0.8);
            font-size: 1.1rem;
            margin-bottom: 20px;
        }

        .stats {
            display: flex;
            justify-content: center;
            gap: 40px;
            margin: 30px 0;
            flex-wrap: wrap;
        }

        .stat-item {
            text-align: center;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary);
        }

        .stat-label {
            color: #636e72;
            font-size: 0.9rem;
        }

        /* Story section */
        .story-section {
            background: #f8f9fa;
            border-radius: 20px;
            padding: 25px;
            margin: 20px 0;
        }

        .story-title {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--dark);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .story-content {
            color: #636e72;
            line-height: 1.8;
            font-size: 1rem;
        }

        .story-content p {
            margin-bottom: 10px;
        }

        .highlight {
            background: linear-gradient(180deg, transparent 60%, var(--accent) 60%);
            padding: 0 5px;
            font-weight: 600;
        }

        /* Goals */
        .goals-section {
            margin: 30px 0;
        }

        .goal-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            background: white;
            border-radius: 15px;
            margin-bottom: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s;
        }

        .goal-item:hover {
            transform: translateX(10px);
        }

        .goal-icon {
            font-size: 2rem;
        }

        .goal-text {
            flex: 1;
        }

        .goal-title {
            font-weight: 600;
            color: var(--dark);
        }

        .goal-desc {
            font-size: 0.9rem;
            color: #636e72;
        }

        /* Donation options */
        .donation-section {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 215, 0, 0.2);
            border-radius: 30px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            margin-bottom: 40px;
            margin-top: 30px;
        }

        .section-title {
            font-size: 1.8rem;
            font-weight: 700;
            color: #ffd700;
            /* Gold title */
            text-align: center;
            margin-bottom: 30px;
        }

        .donation-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }

        .donation-card {
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(255, 215, 0, 0.3);
            border-radius: 20px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            color: white;
        }

        .donation-card:hover {
            background: rgba(255, 215, 0, 0.1);
            transform: translateY(-5px);
        }

        .donation-card.selected {
            border-color: #ffd700;
            background: rgba(255, 215, 0, 0.2);
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.4);
        }

        .donation-amount {
            font-size: 1.2rem;
            font-weight: 700;
            color: #ffd700;
        }

        .donation-desc {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.7);
            margin-top: 5px;
        }

        .currency {
            font-size: 1.2rem;
            font-weight: 600;
            color: white;
        }

        /* Donate button */
        .donate-btn {
            width: 100%;
            padding: 20px;
            background: var(--gradient);
            border: none;
            border-radius: 20px;
            color: white;
            font-size: 1.5rem;
            font-weight: 700;
            font-family: inherit;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 10px 30px rgba(255, 107, 107, 0.4);
            animation: donatePulse 2s ease-in-out infinite;
            position: relative;
            overflow: hidden;
        }

        .donate-btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .donate-btn:hover::before {
            width: 300px;
            height: 300px;
        }

        .donate-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 40px rgba(255, 107, 107, 0.5);
            animation: donatePulse 1s ease-in-out infinite;
        }

        .donate-btn:active {
            transform: translateY(0);
        }

        .donate-btn:disabled {
            opacity: 0.7;
            cursor: not-allowed;
            animation: none;
        }

        @keyframes donatePulse {
            0% {
                transform: scale(1);
                box-shadow: 0 10px 30px rgba(255, 107, 107, 0.4);
            }

            50% {
                transform: scale(1.02);
                box-shadow: 0 15px 40px rgba(255, 107, 107, 0.6), 0 0 0 10px rgba(255, 107, 107, 0.1);
            }

            100% {
                transform: scale(1);
                box-shadow: 0 10px 30px rgba(255, 107, 107, 0.4);
            }
        }

        /* Recent donations */
        .recent-donations {
            background: white;
            border-radius: 30px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            margin-bottom: 30px;
        }

        .donation-list {
            max-height: 400px;
            overflow-y: auto;
        }

        .donation-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            border-bottom: 1px solid #f0f0f0;
            animation: slideIn 0.5s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }

            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .donation-item:last-child {
            border-bottom: none;
        }

        .donor-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--gradient);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }

        .donor-info {
            flex: 1;
        }

        .donor-name {
            font-weight: 600;
            color: var(--dark);
        }

        .donor-message {
            font-size: 0.9rem;
            color: #636e72;
        }

        .donor-amount {
            font-weight: 700;
            color: var(--primary);
            font-size: 1.1rem;
        }

        .donor-time {
            font-size: 0.8rem;
            color: #b2bec3;
        }

        /* Footer */
        .footer {
            text-align: center;
            padding: 60px 20px;
            color: rgba(255, 255, 255, 1);
            position: relative;
            z-index: 10;
            font-size: 1.2rem;
            font-weight: 600;
        }

        .footer a {
            color: var(--accent);
            text-decoration: none;
        }

        .disclaimer {
            margin-top: 20px;
            font-size: 0.95rem;
            opacity: 0.8;
            font-weight: 500;
        }

        /* Toast notification */
        .toast {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: white;
            padding: 20px 30px;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
            display: flex;
            align-items: center;
            gap: 15px;
            transform: translateX(1000px);
            transition: transform 0.5s;
            z-index: 1000;
        }

        .toast.show {
            transform: translateX(0);
        }

        .toast-icon {
            font-size: 2rem;
        }

        .toast-message {
            font-weight: 600;
            color: var(--dark);
        }

        /* Progress bar */
        .progress-section {
            margin: 30px 0;
        }

        .progress-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .progress-label {
            font-weight: 600;
            color: var(--dark);
        }

        .progress-value {
            color: var(--primary);
            font-weight: 700;
        }

        .progress-bar {
            height: 20px;
            background: #e0e0e0;
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: var(--gradient);
            border-radius: 10px;
            transition: width 1s ease;
            position: relative;
        }

        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% {
                transform: translateX(-100%);
            }

            100% {
                transform: translateX(100%);
            }
        }

        .check {
            color: #00b894;
            font-size: 1.5rem;
        }

        .cross {
            color: #ff7675;
            font-size: 1.5rem;
        }

        /* Loading spinner */
        .spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        /* Responsive */
        @media (max-width: 600px) {
            .title {
                font-size: 2.5rem;
            }

            .subtitle {
                font-size: 1rem;
            }

            .profile-card,
            .donation-section,
            .recent-donations,
            .compare-section {
                padding: 25px;
                border-radius: 20px;
            }

            .stats {
                gap: 20px;
            }

            .donation-grid {
                grid-template-columns: 1fr 1fr;
            }

            .donation-card {
                padding: 15px;
                background: rgba(0, 0, 0, 0.4);
                /* Darker background for better contrast on mobile */
                border-color: rgba(255, 215, 0, 0.5);
            }

            .donation-amount {
                font-size: 1.2rem;
                color: #fff;
                /* White for better readability */
                text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8);
            }

            .donation-desc {
                color: rgba(255, 255, 255, 0.9);
                /* Lighter for contrast */
                font-weight: 500;
            }

            .donate-btn {
                font-size: 1.2rem;
                padding: 15px;
            }

            .donation-emoji {
                display: none;
            }

            .toast {
                left: 20px;
                right: 20px;
                bottom: 20px;
            }
        }


        /* Troll badge */
        .troll-badge {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--accent);
            color: var(--dark);
            padding: 10px 20px;
            border-radius: 30px;
            font-weight: 700;
            font-size: 0.9rem;
            z-index: 100;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {

            0%,
            100% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.05);
            }
        }

        /* Payment method selector */
        .payment-method-selector {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            background: #f8f9fa;
            padding: 5px;
            border-radius: 15px;
        }

        .payment-method-btn {
            flex: 1;
            padding: 15px 20px;
            border: none;
            border-radius: 12px;
            background: transparent;
            font-family: inherit;
            font-size: 1rem;
            font-weight: 600;
            color: #636e72;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .payment-method-btn:hover {
            background: rgba(255, 255, 255, 0.5);
        }

        .payment-method-btn.active {
            background: white;
            color: var(--primary);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .payment-method-btn .emoji {
            font-size: 1.3rem;
        }

        /* Bank info section */
        .bank-info-section {
            display: none;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(8px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            border: 2px dashed rgba(255, 255, 255, 0.2);
        }

        .bank-info-section.show {
            display: block;
            animation: slideDown 0.3s ease;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .bank-info-title {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--dark);
            margin-bottom: 20px;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .bank-info-item {
            background: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }

        .bank-info-item:last-child {
            margin-bottom: 0;
        }

        .bank-info-label {
            font-weight: 600;
            color: #636e72;
            font-size: 0.9rem;
            margin-bottom: 5px;
        }

        .bank-info-value {
            font-weight: 700;
            color: var(--dark);
            font-size: 1.1rem;
            word-break: break-all;
        }

        .bank-info-copy-btn {
            background: var(--gradient);
            border: none;
            border-radius: 10px;
            padding: 8px 15px;
            color: white;
            font-weight: 600;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s;
            white-space: nowrap;
            margin-left: 15px;
        }

        .bank-info-copy-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 107, 107, 0.3);
        }

        .bank-info-copy-btn:active {
            transform: translateY(0);
        }

        .bank-info-row {
            display: flex;
            align-items: center;
            flex: 1;
        }

        .bank-info-content {
            flex: 1;
        }

        @media (max-width: 600px) {
            .payment-method-btn {
                font-size: 0.85rem;
                padding: 12px 15px;
            }

            .bank-info-item {
                flex-direction: column;
                align-items: flex-start;
            }

            .bank-info-copy-btn {
                width: 100%;
                margin-left: 0;
                margin-top: 10px;
            }

            .bank-info-row {
                width: 100%;
            }
        }

        /* Payment Method Modal */
        .payment-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .payment-modal.show {
            display: flex;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        .payment-modal-content {
            background: white;
            border-radius: 30px;
            padding: 25px;
            max-width: 450px;
            width: 95%;
            max-height: 90vh;
            /* Prevent overflow on mobile */
            overflow-y: auto;
            /* Scrollable content */
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            animation: slideUp 0.3s ease;
            position: relative;
        }

        @keyframes slideUp {
            from {
                transform: translateY(50px);
                opacity: 0;
            }

            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .payment-modal-header {
            text-align: center;
            margin-bottom: 20px;
            /* Reduced from 30px */
        }

        .payment-modal-title {
            font-size: 1.5rem;
            /* Reduced from 1.8rem */
            font-weight: 700;
            color: var(--dark);
            margin-bottom: 5px;
            /* Reduced from 10px */
        }

        .payment-modal-amount {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--primary);
        }

        .payment-modal-options {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-bottom: 20px;
        }

        .payment-modal-option {
            padding: 20px;
            border: 3px solid #f0f0f0;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .payment-modal-option:hover {
            border-color: var(--primary);
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(255, 107, 107, 0.2);
        }

        .payment-modal-option-icon {
            font-size: 2.5rem;
        }

        .payment-modal-option-content {
            flex: 1;
        }

        .payment-modal-option-title {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--dark);
            margin-bottom: 5px;
        }

        .payment-modal-option-desc {
            font-size: 0.9rem;
            color: #636e72;
        }

        .payment-modal-close {
            position: absolute;
            top: 15px;
            right: 15px;
            background: #f0f0f0;
            border: none;
            border-radius: 50%;
            width: 35px;
            height: 35px;
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .payment-modal-close:hover {
            background: var(--primary);
            color: white;
        }

        .payment-modal-bank-info {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 25px;
            margin-top: 15px;
            border: 1px solid #ffd700;
            display: none;
            box-shadow: inset 0 0 10px rgba(255, 215, 0, 0.1);
        }

        .payment-modal-bank-info.show {
            display: block;
            animation: slideDown 0.3s ease;
        }

        .qr-container {
            text-align: center;
            margin-bottom: 10px;
            padding: 10px;
            background: #fff;
            border-radius: 12px;
            border: 1px solid #eee;
        }

        .qr-image {
            width: 100%;
            max-width: 160px;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .payment-modal-bank-item {
            background: white;
            border-radius: 10px;
            padding: 10px 15px;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .payment-modal-bank-item:last-child {
            margin-bottom: 0;
        }

        .payment-modal-bank-label {
            font-weight: 600;
            color: #636e72;
            font-size: 0.9rem;
            margin-bottom: 5px;
        }

        .payment-modal-bank-value {
            font-weight: 700;
            color: var(--dark);
            font-size: 1rem;
            word-break: break-all;
        }

        .payment-modal-bank-copy {
            background: var(--gradient);
            border: none;
            border-radius: 8px;
            padding: 6px 12px;
            color: white;
            font-weight: 600;
            font-size: 0.85rem;
            cursor: pointer;
            white-space: nowrap;
            margin-left: 10px;
        }

        @media (max-width: 600px) {
            .payment-modal-content {
                padding: 20px 15px;
                /* Reduced padding on mobile */
                border-radius: 20px;
            }

            .payment-modal-title {
                font-size: 1.4rem;
            }

            .payment-modal-option {
                padding: 15px;
            }

            .payment-modal-option-icon {
                font-size: 2rem;
            }

            .payment-modal-bank-item {
                flex-direction: column;
                align-items: flex-start;
            }

            .payment-modal-bank-copy {
                width: 100%;
                margin-left: 0;
                margin-top: 10px;
            }
        }

        /* Input fields */
        .input-group {
            margin-bottom: 15px;
            text-align: left;
        }

        .input-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--dark);
            font-size: 0.95rem;
        }

        .input-field {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #f0f0f0;
            border-radius: 12px;
            font-family: inherit;
            font-size: 1rem;
            transition: all 0.3s;
            background: #fdfdfd;
        }

        .input-field:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 4px rgba(255, 107, 107, 0.1);
            background: white;
        }

        textarea.input-field {
            resize: vertical;
            min-height: 80px;
        }
    </style>
</head>

<body>
    <!-- Festive Background Elements -->
    <div class="festive-bg">
        <img src="flower_red.webp" class="flower-top flower-center">
        <div class="lantern-container" style="justify-content: space-between; padding: 0 50px;">
            <img src="lantern.webp" class="lantern">
            <img src="lantern.webp" class="lantern">
        </div>

        <img src="branch_blossom.webp" class="branch-bg">

    </div>

    <!-- Floating emojis - Rendered by JS -->
    <div id="floatingEmojisContainer"></div>


    <div class="container">
        <div class="profile-section">
            <div class="avatar-card" id="avatarContent">
                <img src="avatar.png" class="avatar-img" alt="Avatar">
            </div>

            <div class="content-card">
                <div class="card-toolbar">
                    <div class="toolbar-dot dot-red"></div>
                    <div class="toolbar-dot dot-yellow"></div>
                    <div class="toolbar-dot dot-green"></div>
                </div>
                <div id="storyContent"></div>
            </div>

            <p class="lixi-text">NÄƒm má»›i 2026 LÃŒXÃŒ tÃ´i Ä‘i</p>

            <div class="lixi-footer">
                <!-- Assuming there are red envelope icons or similar, using lion head as main icon -->
                <img src="red_envelopes.webp" style="width: 50px; transform: rotate(30deg);" alt="">
                <!-- Placeholder for small ornament -->
                <button class="lixi-btn"
                    onclick="document.querySelector('.donation-section').scrollIntoView({behavior: 'smooth'})">LÃ¬
                    XÃ¬</button>
                <img src="lion_head.webp" class="lion-head-img" alt="Lion Head">
            </div>
        </div>

        <!-- Donation Section -->
        <div class="donation-section">
            <h2 class="section-title" id="donateSectionTitle"></h2>
            <div class="donation-grid" id="donationGrid"></div>
            <div id="customAmountContainer" style="display: none; margin-bottom: 20px;">
                <div class="input-group">
                    <label class="input-label" style="color: #ffd700;">Nháº­p sá»‘ tiá»n báº¡n muá»‘n lÃ¬ xÃ¬ (VNÄ)</label>
                    <input type="number" id="customAmountInput" class="input-field" placeholder="VÃ­ dá»¥: 99000"
                        min="1000" step="1000">
                </div>
            </div>
            <button class="donate-btn" id="donateBtn"></button>
        </div>

        <!-- Recent Donations -->
        <div class="recent-donations">
            <h2 class="section-title" id="donorsSectionTitle"></h2>
            <div class="donation-list" id="donationList"></div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <p id="footerAuthor"></p>
        <p style="margin-top: 10px;" id="footerText"></p>
        <p class="disclaimer" id="disclaimer"></p>
    </footer>

    <!-- Toast -->
    <div class="toast" id="toast">
        <span class="toast-icon">ğŸ‰</span>
        <span class="toast-message" id="toastMessage">Cáº£m Æ¡n báº¡n Ä‘Ã£ nuÃ´i tÃ´i!</span>
    </div>

    <!-- Payment Method Modal -->
    <div class="payment-modal" id="paymentModal">
        <div class="payment-modal-content">
            <button class="payment-modal-close" id="paymentModalClose">Ã—</button>
            <div class="payment-modal-header">
                <div class="payment-modal-title">Chá»n phÆ°Æ¡ng thá»©c thanh toÃ¡n</div>
                <div class="payment-modal-amount" id="modalAmount"></div>
            </div>

            <div class="input-group">
                <label class="input-label">TÃªn cá»§a báº¡n ğŸ¦¸â™‚ï¸</label>
                <input type="text" id="donorName" class="input-field" placeholder="NhÃ  háº£o tÃ¢m bÃ­ áº©n" maxlength="30">
            </div>

            <div class="input-group">
                <label class="input-label">Lá»i nháº¯n nhá»§ ğŸ’Œ</label>
                <textarea id="donorMessage" class="input-field" placeholder="VÃ­ dá»¥: Mua ly cÃ  phÃª nhÃ©! Cá»‘ lÃªn..."
                    maxlength="100"></textarea>
            </div>

            <div class="payment-modal-options">
                <div class="payment-modal-option" data-method="momo" id="modalMomoOption">
                    <div class="payment-modal-option-icon">ğŸ’œ</div>
                    <div class="payment-modal-option-content">
                        <div class="payment-modal-option-title">Thanh toÃ¡n qua MoMo</div>
                        <div class="payment-modal-option-desc">Chuyá»ƒn khoáº£n nhanh qua á»©ng dá»¥ng MoMo</div>
                    </div>
                </div>
                <div class="payment-modal-option" data-method="bank" id="modalBankOption">
                    <div class="payment-modal-option-icon">ğŸ¦</div>
                    <div class="payment-modal-option-content">
                        <div class="payment-modal-option-title">Chuyá»ƒn khoáº£n ngÃ¢n hÃ ng</div>
                        <div class="payment-modal-option-desc">Chuyá»ƒn khoáº£n qua tÃ i khoáº£n ngÃ¢n hÃ ng</div>
                    </div>
                </div>
            </div>
            <div class="payment-modal-bank-info" id="modalBankInfo">
                <div id="modalBankInfoContent"></div>
            </div>
        </div>
    </div>

    <script>
        // â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
        // â•‘                    ğŸ¨ Cáº¤U HÃŒNH CÃ NHÃ‚N HÃ“A - CHá»ˆNH Sá»¬A á» ÄÃ‚Y!               â•‘
        // â•‘         Chá»‰ cáº§n thay Ä‘á»•i ná»™i dung trong biáº¿n CONFIG bÃªn dÆ°á»›i               â•‘
        // â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

        const CONFIG = {
            // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
            // ğŸ“Œ THÃ”NG TIN CÆ  Báº¢N
            // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
            pageTitle: "Lixi cho tÃ´i",              // TiÃªu Ä‘á» trang (hiá»ƒn thá»‹ trÃªn tab)

            // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
            // ğŸ‘¤ THÃ”NG TIN CÃ NHÃ‚N
            // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
            avatar: "avatar.png",                         // Avatar (emoji hoáº·c link áº£nh)
            statusBadge: "",                     // Badge tráº¡ng thÃ¡i bÃªn cáº¡nh avatar
            authorName: "Äáº¡t",                    // TÃªn hiá»ƒn thá»‹ á»Ÿ footer
            authorLink: "https://www.facebook.com/ngAnhDat13042",                       // Link tá»›i profile (Ä‘á»ƒ trá»‘ng náº¿u khÃ´ng cÃ³)

            // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
            // ğŸ“– CÃ‚U CHUYá»†N Cá»¦A Báº N
            // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
            storyTitle: "",
            storyContent: `
                <p>Xin chÃ o tÃ´i lÃ  Äáº¡t, tÃ´i lÃ  má»™t Software Engineer Ä‘ang há»c táº¡i trÆ°á»ng Harvard Nhá»•n ğŸ«. Äang loay hoay vá»›i tÆ°Æ¡ng lai sáº¯p tá»›i, ngá»“i code Ä‘áº¿n 3h sÃ¡ng (cÃ³ thá»ƒ lÃ  khÃ´ng), tÃ³c Ä‘Ã£ thÆ°a, máº¯t Ä‘Ã£ cáº­n, lÆ°ng Ä‘Ã£ cÃ²ng. Má»i sá»± giÃºp Ä‘á»¡ cá»§a cÃ¡c báº¡n sáº½ giÃºp tÃ´i</p>
                <ul style="margin-top: 10px; margin-left: 20px;">
                    <li>Má»™t cá»‘c trÃ  thÃ¡i ğŸ§‹</li>
                    <li>Ä‚n cÆ¡m thay mÃ¬ ğŸœ</li>
                    <li>CÃ³ tiá»n Ä‘á»• xÄƒng ğŸï¸</li>
                    <li>Äi sÄƒn HotWheels ğŸš—</li>
                    <li>Äi Äƒn Dookki ğŸ”</li>
                    <li>GÃ³p quá»¹ cháº¡y tháº­n ğŸ¥</li>
                    
                </ul>
            `,


            // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
            // ğŸ’° CÃC Má»¨C DONATE
            // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
            donationOptions: [
                {
                    amount: 20000,
                    emoji: "ğŸ§‹",
                    description: "1 cá»‘c matcha + toppings",
                    momoLink: "https://me.momo.vn/K2IWuZTPCRfkuAFmuyie/K9b6WNDkL8D9dEv"
                },
                {
                    amount: 35000,
                    emoji: "ğŸš",
                    description: "Suáº¥t cÆ¡m bá»¥i",
                    momoLink: "https://me.momo.vn/K2IWuZTPCRfkuAFmuyie/olejYKXy7gwRdjN"
                },
                {
                    amount: 50000,
                    emoji: "ğŸ’µ",
                    description: "1 bÃ¬nh xÄƒng cho chiáº¿n mÃ£ ",
                    momoLink: "https://me.momo.vn/K2IWuZTPCRfkuAFmuyie/YRdGRr1GyJ9JbDz"
                },
                {
                    amount: 69000,
                    emoji: "ğŸš—",
                    description: "1 chiáº¿c HotWheels",
                    momoLink: "https://me.momo.vn/K2IWuZTPCRfkuAFmuyie/y1aK8ygMKWvGbQG",
                    isDefault: true  // Má»©c máº·c Ä‘á»‹nh Ä‘Æ°á»£c chá»n sáºµn
                },
                {
                    amount: 150000,
                    emoji: "ğŸ’",
                    description: "1 bá»¯a buffet",
                    momoLink: "https://me.momo.vn/K2IWuZTPCRfkuAFmuyie/l9avQvnXqMlVeG1"
                }
            ],

            // Link MoMo máº·c Ä‘á»‹nh (khi khÃ´ng tÃ¬m tháº¥y amount phÃ¹ há»£p)
            momoFallback: "https://me.momo.vn/K2IWuZTPCRfkuAFmuyie",

            // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
            // ğŸ¦ THÃ”NG TIN TÃ€I KHOáº¢N NGÃ‚N HÃ€NG
            // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
            bankAccounts: [
                {
                    bankName: "Vietcombank",
                    accountNumber: "1028696190",
                    accountHolder: "Nguyá»…n Anh Äáº¡t",  // Äiá»n tÃªn chá»§ tÃ i khoáº£n vÃ o Ä‘Ã¢y
                },
            ],

            // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
            // ğŸ‰ DANH SÃCH NGÆ¯á»œI ÄÃƒ DONATE
            // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
            // ThÃªm ngÆ°á»i donate má»›i theo format bÃªn dÆ°á»›i
            // Äá»ƒ máº£ng rá»—ng [] náº¿u chÆ°a cÃ³ ai donate
            recentDonations: [
                // VÃ­ dá»¥ (bá» comment // Ä‘á»ƒ sá»­ dá»¥ng):
                {
                    avatar: "ğŸ˜‡",                           // Emoji avatar
                    name: "NGUYEN HUONG HUONG",            // TÃªn ngÆ°á»i donate
                    message: "NGUYEN THI HUONG CHUYEN TIEN",  // Lá»i nháº¯n
                    amount: 150000,                         // Sá»‘ tiá»n (khÃ´ng cÃ³ dáº¥u pháº©y)
                    time: "2026-01-30 19:23:53"            // Thá»i gian (YYYY-MM-DD HH:MM:SS)
                },
                {
                    avatar: "ğŸ˜‡",                           // Emoji avatar
                    name: "LE NGOC",            // TÃªn ngÆ°á»i donate
                    message: "a chuyá»ƒn cho Ã­t tiá»n tiÃªu táº¿t",  // Lá»i nháº¯n
                    amount: 2000000,                         // Sá»‘ tiá»n (khÃ´ng cÃ³ dáº¥u pháº©y)
                    time: "2026-02-01 19:48:54"            // Thá»i gian (YYYY-MM-DD HH:MM:SS)
                },
                {
                    avatar: "ğŸ˜‡",                           // Emoji avatar
                    name: "NGUYEN VAN HOANG",            // TÃªn ngÆ°á»i donate
                    message: "Tiá»n cÃºng tháº§y",  // Lá»i nháº¯n
                    amount: 150000,                         // Sá»‘ tiá»n (khÃ´ng cÃ³ dáº¥u pháº©y)
                    time: "2026-02-02 00:32:46"            // Thá»i gian (YYYY-MM-DD HH:MM:SS)
                },
                // {
                //     avatar: "ğŸ˜‡",                           // Emoji avatar
                //     name: "Phan Thá»‹ Kim NgÃ¢n",            // TÃªn ngÆ°á»i donate
                //     message: "ÃŠ sao anh lÃ m Ä‘Æ°á»£c cÃ¡i nÃ y hay z :))))",  // Lá»i nháº¯n
                //     amount: 50000,                         // Sá»‘ tiá»n (khÃ´ng cÃ³ dáº¥u pháº©y)
                //     time: "2026-01-10 12:10:27"            // Thá»i gian (YYYY-MM-DD HH:MM:SS)
                // },
                // {
                //     avatar: "ğŸ˜‡",                           // Emoji avatar
                //     name: "NGUYEN VAN QUANG",            // TÃªn ngÆ°á»i donate
                //     message: "donate",  // Lá»i nháº¯n
                //     amount: 25000,                         // Sá»‘ tiá»n (khÃ´ng cÃ³ dáº¥u pháº©y)
                //     time: "2026-01-10 09:54:35"            // Thá»i gian (YYYY-MM-DD HH:MM:SS)
                // },
            ],

            // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
            // ğŸ“ FOOTER - PHáº¦N CUá»I TRANG
            // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
            footerText: "Náº¿u báº¡n tháº¥y hay, hÃ£y Ä‘Äƒng tin IG vÃ  tag tÃ´i vÃ o nhÃ©!!!",
            disclaimer: `
                âš ï¸ ÄÃ¢y lÃ  trang web parody/troll.<br>
                Má»i donate Ä‘á»u Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ Äƒn phá»Ÿ vÃ  mua cÃ  phÃª (tháº­t sá»±), nhÆ°ng sao kÃª thÃ¬ khÃ´ng cÃ³ Ä‘Ã¢u! ğŸœ â˜•
            `,

            // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
            // ğŸ¨ TÃ™Y CHá»ˆNH GIAO DIá»†N (NÃ¢ng cao - khÃ´ng báº¯t buá»™c)
            // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
            sectionTitleDonate: "ğŸ’ Lixi Ä‘i mÃ² ğŸ‘‰ğŸ‘ˆ!",
            sectionTitleDonors: "ğŸ‰ Nhá»¯ng ngÆ°á»i tá»‘t bá»¥ng",
            donateButtonText: "Lixi Ä‘i",           // Text nÃºt donate (sáº½ thÃªm sá»‘ tiá»n tá»± Ä‘á»™ng)
            emptyDonationTitle: "ChÆ°a cÃ³ ai nuÃ´i tÃ´i...",
            emptyDonationQuote: '"Má»™t Ä‘á»“ng cÅ©ng lÃ  tÃ¬nh thÆ°Æ¡ng, hai Ä‘á»“ng cÅ©ng lÃ  yÃªu máº¿n" ğŸ’',
        };

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // âš ï¸ KHÃ”NG Cáº¦N Sá»¬A CODE BÃŠN DÆ¯á»šI (trá»« khi báº¡n biáº¿t mÃ¬nh Ä‘ang lÃ m gÃ¬)
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        // âš ï¸ KHÃ”NG Cáº¦N Sá»¬A CODE BÃŠN DÆ¯á»šI (trá»« khi báº¡n biáº¿t mÃ¬nh Ä‘ang lÃ m gÃ¬)
        // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

        // Apply page title
        document.title = CONFIG.pageTitle;

        // State
        let selectedAmount = CONFIG.donationOptions?.find(opt => opt.isDefault)?.amount ||
            (CONFIG.donationOptions && CONFIG.donationOptions.length > 0 ? CONFIG.donationOptions[0].amount : 0);

        // Get MoMo link by amount
        function getMoMoLink(amount) {
            const option = CONFIG.donationOptions.find(opt => opt.amount === amount);
            return option?.momoLink || CONFIG.momoFallback;
        }

        // Render floating emojis
        function renderFloatingEmojis() {
            const container = document.getElementById('floatingEmojisContainer');
            if (!container || !CONFIG.floatingEmojis) return;
            container.innerHTML = CONFIG.floatingEmojis.map((emoji, index) => {
                const left = 10 + (index * 10);
                const delay = index * 2;
                return `<div class="floating-emoji" style="left: ${left}%; animation-delay: ${delay}s;">${emoji}</div>`;
            }).join('');
        }

        // Render Falling Elements (Clouds & Lixi)
        function startFallingEffects() {
            const container = document.body;

            function createFallingElement(type) {
                const element = document.createElement('div');
                element.className = 'falling-element';

                if (type === 'yellow-lixi') {
                    const img = document.createElement('img');
                    img.src = 'red_envelopes.webp';
                    img.style.width = (30 + Math.random() * 20) + 'px';
                    img.style.opacity = '0.8';
                    element.appendChild(img);
                } else {
                    const lixi = document.createElement('div');
                    lixi.className = 'lixi-icon';
                    lixi.textContent = 'ğŸ§§';
                    element.appendChild(lixi);
                }

                const startX = Math.random() * 100;
                const duration = 5 + Math.random() * 10;
                const drift = (Math.random() - 0.5) * 200;
                const rotation = (Math.random() - 0.5) * 720;

                element.style.left = `${startX}%`;
                element.style.animationDuration = `${duration}s`;
                element.style.setProperty('--drift', `${drift}px`);
                element.style.setProperty('--rotation', `${rotation}deg`);

                container.appendChild(element);

                setTimeout(() => {
                    element.remove();
                }, duration * 1000);
            }

            // Create yellow-lixi periodically
            setInterval(() => createFallingElement('yellow-lixi'), 4000);

            // Create lixi periodically
            setInterval(() => createFallingElement('lixi'), 3000);

            // Initial batch
            for (let i = 0; i < 5; i++) {
                setTimeout(() => createFallingElement('yellow-lixi'), Math.random() * 5000);
                setTimeout(() => createFallingElement('lixi'), Math.random() * 5000);
            }
        }


        // Render profile
        function renderProfile() {
            const avatarContent = document.getElementById('avatarContent');
            const statusBadge = document.getElementById('statusBadge');
            const storyTitle = document.getElementById('storyTitle');
            const storyContent = document.getElementById('storyContent');

            if (avatarContent && CONFIG.avatar) {
                avatarContent.innerHTML = (CONFIG.avatar.endsWith('.png') || CONFIG.avatar.endsWith('.jpg') || CONFIG.avatar.endsWith('.webp') || CONFIG.avatar.startsWith('http'))
                    ? `<img src="${CONFIG.avatar}" class="avatar-img" alt="Avatar">`
                    : CONFIG.avatar;
            }
            if (statusBadge && CONFIG.statusBadge) {
                statusBadge.textContent = CONFIG.statusBadge;
            }
            if (storyTitle && CONFIG.storyTitle) {
                storyTitle.innerHTML = CONFIG.storyTitle;
            }
            if (storyContent && CONFIG.storyContent) {
                storyContent.innerHTML = CONFIG.storyContent;
            }
        }

        // Render donation options
        function renderDonationOptions() {
            const grid = document.getElementById('donationGrid');
            if (!grid || !CONFIG.donationOptions || CONFIG.donationOptions.length === 0) return;

            const optionsHtml = CONFIG.donationOptions.map(option => `
                <div class="donation-card ${option.isDefault ? 'selected' : ''}" data-amount="${option.amount || 0}">
                    <div class="donation-emoji">${option.emoji || ''}</div>
                    <div class="donation-amount">${formatCurrency(option.amount || 0)}</div>
                    <div class="donation-desc">${option.description || ''}</div>
                </div>
            `).join('');

            // Add Custom option
            const customOptionHtml = `
                <div class="donation-card" id="btnCustomAmount" data-amount="custom">
                    <div class="donation-emoji">ğŸ§§</div>
                    <div class="donation-amount">TÃ¹y tÃ¢m</div>
                    <div class="donation-desc">Bao nhiÃªu cÅ©ng Ä‘Æ°á»£c, vÃ o Ä‘Ã¢y lÃ  vui rá»“i</div>
                </div>
            `;

            grid.innerHTML = optionsHtml + customOptionHtml;

            // Re-attach event listeners
            document.querySelectorAll('.donation-card').forEach(card => {
                card.addEventListener('click', () => {
                    document.querySelectorAll('.donation-card').forEach(c => c.classList.remove('selected'));
                    card.classList.add('selected');

                    const customContainer = document.getElementById('customAmountContainer');
                    const customInput = document.getElementById('customAmountInput');

                    if (card.dataset.amount === 'custom') {
                        if (customContainer) customContainer.style.display = 'block';
                        if (customInput) customInput.focus();
                        selectedAmount = 0; // Will be taken from input
                    } else {
                        if (customContainer) customContainer.style.display = 'none';
                        const amount = parseInt(card.dataset.amount, 10);
                        if (!isNaN(amount)) {
                            selectedAmount = amount;
                        }
                    }
                    updateButtonText();
                });
            });

            // Custom amount input event
            const customInput = document.getElementById('customAmountInput');
            if (customInput) {
                customInput.addEventListener('input', () => {
                    selectedAmount = parseInt(customInput.value, 10) || 0;
                    updateButtonText();
                });
            }
        }

        // Render footer
        function renderFooter() {
            const footerAuthor = document.getElementById('footerAuthor');
            const footerText = document.getElementById('footerText');
            const disclaimer = document.getElementById('disclaimer');

            if (footerAuthor && CONFIG.authorName) {
                const authorLink = CONFIG.authorLink
                    ? `<a href="${CONFIG.authorLink}" target="_blank">${CONFIG.authorName}</a>`
                    : `<a>${CONFIG.authorName}</a>`;
                footerAuthor.innerHTML = `Made with ğŸ’” by ${authorLink}, shoutout to aTuáº¥n`;
            }
            if (footerText && CONFIG.footerText) {
                footerText.textContent = CONFIG.footerText;
            }
            if (disclaimer && CONFIG.disclaimer) {
                disclaimer.innerHTML = CONFIG.disclaimer;
            }
        }

        // Render section titles
        function renderSectionTitles() {
            const donateSectionTitle = document.getElementById('donateSectionTitle');
            const donorsSectionTitle = document.getElementById('donorsSectionTitle');

            if (donateSectionTitle && CONFIG.sectionTitleDonate) {
                donateSectionTitle.innerHTML = CONFIG.sectionTitleDonate;
            }
            if (donorsSectionTitle && CONFIG.sectionTitleDonors) {
                donorsSectionTitle.innerHTML = CONFIG.sectionTitleDonors;
            }
        }

        // Render bank info
        function renderBankInfo() {
            const bankInfoContent = document.getElementById('bankInfoContent');
            if (!bankInfoContent) return;

            if (!CONFIG.bankAccounts || CONFIG.bankAccounts.length === 0) {
                bankInfoContent.innerHTML = '<p style="text-align: center; color: #636e72;">ChÆ°a cÃ³ thÃ´ng tin tÃ i khoáº£n ngÃ¢n hÃ ng</p>';
                return;
            }

            bankInfoContent.innerHTML = CONFIG.bankAccounts.map((account, index) => {
                if (!account || !account.accountNumber) return '';
                const bankName = account.bankName || '';
                const accountNumber = account.accountNumber || '';
                const accountHolder = account.accountHolder || '';
                const branch = account.branch || '';

                return `
                <div class="bank-info-item">
                    <div class="bank-info-row">
                        <div class="bank-info-content">
                            <div class="bank-info-label">NgÃ¢n hÃ ng</div>
                            <div class="bank-info-value">${bankName}${branch ? ` - ${branch}` : ''}</div>
                        </div>
                    </div>
                </div>
                <div class="bank-info-item">
                    <div class="bank-info-row">
                        <div class="bank-info-content">
                            <div class="bank-info-label">Sá»‘ tÃ i khoáº£n</div>
                            <div class="bank-info-value" id="accountNumber${index}">${accountNumber}</div>
                        </div>
                    </div>
                    <button class="bank-info-copy-btn" onclick="copyBankInfo('accountNumber${index}', 'Sá»‘ tÃ i khoáº£n')">
                        ğŸ“‹ Copy
                    </button>
                </div>
                ${accountHolder ? `
                <div class="bank-info-item">
                    <div class="bank-info-row">
                        <div class="bank-info-content">
                            <div class="bank-info-label">Chá»§ tÃ i khoáº£n</div>
                            <div class="bank-info-value" id="accountHolder${index}">${accountHolder}</div>
                        </div>
                    </div>
                    <button class="bank-info-copy-btn" onclick="copyBankInfo('accountHolder${index}', 'TÃªn chá»§ tÃ i khoáº£n')">
                        ğŸ“‹ Copy
                    </button>
                </div>
                ` : ''}
                ${index < CONFIG.bankAccounts.length - 1 ? '<div style="height: 20px;"></div>' : ''}
                `;
            }).filter(html => html).join('');
        }

        // Copy bank info to clipboard
        window.copyBankInfo = function (elementId, label) {
            const element = document.getElementById(elementId);
            if (!element) {
                showToast('KhÃ´ng tÃ¬m tháº¥y thÃ´ng tin Ä‘á»ƒ copy', 'âŒ');
                return;
            }
            const text = element.textContent || '';

            if (navigator.clipboard && navigator.clipboard.writeText) {
                navigator.clipboard.writeText(text).then(() => {
                    showToast(`ÄÃ£ copy ${label}! ğŸ“‹`, 'âœ…');
                }).catch(() => {
                    copyToClipboardFallback(text);
                });
            } else {
                copyToClipboardFallback(text);
            }
        };

        // Show payment modal
        function showPaymentModal(amount) {
            const modal = document.getElementById('paymentModal');
            const modalAmount = document.getElementById('modalAmount');
            const modalBankInfo = document.getElementById('modalBankInfo');
            const inputGroups = document.querySelectorAll('#paymentModal .input-group');
            const optionsArea = document.querySelector('.payment-modal-options');

            if (!modal || !modalAmount) return;

            modalAmount.textContent = formatCurrency(amount || selectedAmount || 0);
            modal.classList.add('show');
            modalBankInfo.classList.remove('show');

            // Show selection elements
            inputGroups.forEach(g => g.style.display = 'block');
            if (optionsArea) optionsArea.style.display = 'flex';

            // Reset option states
            document.querySelectorAll('.payment-modal-option').forEach(opt => {
                opt.style.borderColor = '#f0f0f0';
            });
        }

        // Hide payment modal
        function hidePaymentModal() {
            const modal = document.getElementById('paymentModal');
            if (modal) {
                modal.classList.remove('show');
            }
        }

        // Render bank info in modal
        function renderModalBankInfo(amount = 0) {
            const modalBankInfoContent = document.getElementById('modalBankInfoContent');
            if (!modalBankInfoContent) return;

            if (!CONFIG.bankAccounts || CONFIG.bankAccounts.length === 0) {
                modalBankInfoContent.innerHTML = '<p style="text-align: center; color: #636e72; padding: 10px;">ChÆ°a cÃ³ thÃ´ng tin tÃ i khoáº£n ngÃ¢n hÃ ng</p>';
                return;
            }

            const account = CONFIG.bankAccounts[0];
            if (!account || !account.accountNumber) {
                modalBankInfoContent.innerHTML = '<p style="text-align: center; color: #636e72; padding: 10px;">ThÃ´ng tin tÃ i khoáº£n khÃ´ng há»£p lá»‡</p>';
                return;
            }

            const bankName = account.bankName || '';
            const accountNumber = account.accountNumber || '';
            const accountHolder = account.accountHolder || '';
            const branch = account.branch || '';

            modalBankInfoContent.innerHTML = `
                <div class="card-toolbar" style="margin-bottom: 20px;">
                    <div class="toolbar-dot dot-red"></div>
                    <div class="toolbar-dot dot-yellow"></div>
                    <div class="toolbar-dot dot-green"></div>
                    <span style="font-size: 0.8rem; font-weight: 700; color: #636e72; margin-left: 10px; font-style: normal;">THÃ”NG TIN CHUYá»‚N KHOáº¢N</span>
                </div>
                <div class="qr-container">
                    <img src="QR.jpg" class="qr-image" alt="QR Code Payment">
                    <p style="font-size: 0.8rem; color: #636e72; margin-top: 10px;">QuÃ©t mÃ£ QR Ä‘á»ƒ chuyá»ƒn khoáº£n nhanh</p>
                </div>
                <div class="payment-modal-bank-item">
                    <div style="flex: 1;">
                        <div class="payment-modal-bank-label">NgÃ¢n hÃ ng</div>
                        <div class="payment-modal-bank-value">${bankName}${branch ? ` - ${branch}` : ''}</div>
                    </div>
                </div>
                <div class="payment-modal-bank-item">
                    <div style="flex: 1;">
                        <div class="payment-modal-bank-label">Sá»‘ tÃ i khoáº£n</div>
                        <div class="payment-modal-bank-value" id="modalAccountNumber">${accountNumber}</div>
                    </div>
                    <button class="payment-modal-bank-copy" onclick="copyBankInfo('modalAccountNumber', 'Sá»‘ tÃ i khoáº£n')">
                        ğŸ“‹ Copy
                    </button>
                </div>
                ${accountHolder ? `
                <div class="payment-modal-bank-item">
                    <div style="flex: 1;">
                        <div class="payment-modal-bank-label">Chá»§ tÃ i khoáº£n</div>
                        <div class="payment-modal-bank-value" id="modalAccountHolder">${accountHolder}</div>
                    </div>
                    <button class="payment-modal-bank-copy" onclick="copyBankInfo('modalAccountHolder', 'TÃªn chá»§ tÃ i khoáº£n')">
                        ğŸ“‹ Copy
                    </button>
                </div>
                ` : ''}
                <div style="margin-top: 10px; text-align: center;">
                    <button class="lixi-btn" style="width: 100%; padding: 10px;" onclick="copyAllBankInfo(${amount})">
                        ğŸ“‹ Copy táº¥t cáº£ thÃ´ng tin
                    </button>
                </div>
            `;
        }

        // Copy all bank info function
        window.copyAllBankInfo = function (amount = 0) {
            if (!CONFIG.bankAccounts || CONFIG.bankAccounts.length === 0) {
                showToast('ChÆ°a cÃ³ thÃ´ng tin tÃ i khoáº£n ngÃ¢n hÃ ng', 'âŒ');
                return;
            }

            const account = CONFIG.bankAccounts[0];
            if (!account || !account.accountNumber) {
                showToast('ThÃ´ng tin tÃ i khoáº£n khÃ´ng há»£p lá»‡', 'âŒ');
                return;
            }

            let bankInfo = `NgÃ¢n hÃ ng: ${account.bankName || ''}${account.branch ? ` - ${account.branch}` : ''}\nSá»‘ tÃ i khoáº£n: ${account.accountNumber}`;
            if (account.accountHolder) {
                bankInfo += `\nChá»§ tÃ i khoáº£n: ${account.accountHolder}`;
            }
            bankInfo += `\nSá»‘ tiá»n: ${formatCurrency(amount || selectedAmount || 0)}`;

            if (navigator.clipboard && navigator.clipboard.writeText) {
                navigator.clipboard.writeText(bankInfo).then(() => {
                    showToast('ÄÃ£ copy táº¥t cáº£ thÃ´ng tin tÃ i khoáº£n! ğŸ“‹', 'âœ…');
                }).catch(() => {
                    copyToClipboardFallback(bankInfo);
                });
            } else {
                copyToClipboardFallback(bankInfo);
            }
        };

        // DOM Elements
        const donateBtn = document.getElementById('donateBtn');
        const toast = document.getElementById('toast');
        const toastMessage = document.getElementById('toastMessage');
        const donationList = document.getElementById('donationList');

        // Convert timestamp to relative time
        function timeAgo(dateTimeString) {
            if (!dateTimeString) return '';
            try {
                const now = new Date();
                const past = new Date(dateTimeString);
                if (isNaN(past.getTime())) return '';

                const diffMs = now - past;
                if (diffMs < 0) return 'Vá»«a xong';

                const diffSec = Math.floor(diffMs / 1000);
                const diffMin = Math.floor(diffSec / 60);
                const diffHour = Math.floor(diffMin / 60);
                const diffDay = Math.floor(diffHour / 24);
                const diffWeek = Math.floor(diffDay / 7);
                const diffMonth = Math.floor(diffDay / 30);
                const diffYear = Math.floor(diffDay / 365);

                if (diffYear > 0) return `${diffYear} nÄƒm trÆ°á»›c`;
                if (diffMonth > 0) return `${diffMonth} thÃ¡ng trÆ°á»›c`;
                if (diffWeek > 0) return `${diffWeek} tuáº§n trÆ°á»›c`;
                if (diffDay > 0) return `${diffDay} ngÃ y trÆ°á»›c`;
                if (diffHour > 0) return `${diffHour} giá» trÆ°á»›c`;
                if (diffMin > 0) return `${diffMin} phÃºt trÆ°á»›c`;
                if (diffSec > 0) return `${diffSec} giÃ¢y trÆ°á»›c`;
                return 'Vá»«a xong';
            } catch (e) {
                return '';
            }
        }

        // Render donation list
        function renderDonationList() {
            if (!donationList) return;

            // Náº¿u danh sÃ¡ch rá»—ng, hiá»ƒn thá»‹ ná»™i dung hook donate
            if (!CONFIG.recentDonations || CONFIG.recentDonations.length === 0) {
                const emptyTitle = CONFIG.emptyDonationTitle || 'ChÆ°a cÃ³ ai nuÃ´i tÃ´i...';
                const emptyQuote = CONFIG.emptyDonationQuote || '"Má»™t Ä‘á»“ng cÅ©ng lÃ  tÃ¬nh thÆ°Æ¡ng, hai Ä‘á»“ng cÅ©ng lÃ  yÃªu máº¿n" ğŸ’';
                donationList.innerHTML = `
                    <div class="empty-donation-state" style="text-align: center; padding: 20px;">
                        <div style="font-size: 4rem; margin-bottom: 20px; animation: bounce 2s infinite;">ğŸ˜¢</div>
                        <h3 style="font-size: 1.5rem; color: var(--dark); margin-bottom: 15px;">${emptyTitle}</h3>
                        <p style="font-style: italic; color: #b2bec3; font-size: 0.9rem;">
                            ${emptyQuote}
                        </p>
                    </div>
                `;
                return;
            }

            donationList.innerHTML = CONFIG.recentDonations.map(donation => `
                <div class="donation-item">
                    <div class="donor-avatar">${donation.avatar || 'ğŸ˜Š'}</div>
                    <div class="donor-info">
                        <div class="donor-name">${donation.name || 'Anonymous'}</div>
                        <div class="donor-message">"${donation.message || ''}"</div>
                    </div>
                    <div>
                        <div class="donor-amount">${formatCurrency(donation.amount || 0)}</div>
                        <div class="donor-time">${donation.time ? timeAgo(donation.time) : ''}</div>
                    </div>
                </div>
            `).join('');
        }

        // Update button text
        function updateButtonText() {
            if (!donateBtn) return;
            const buttonText = CONFIG.donateButtonText || 'NuÃ´i TÃ´i';
            donateBtn.innerHTML = `${buttonText} ${formatCurrency(selectedAmount || 0)}!`;
        }

        // Format currency
        function formatCurrency(amount) {
            const numAmount = Number(amount);
            if (isNaN(numAmount) || numAmount < 0) {
                return '0 VNÄ';
            }
            try {
                return new Intl.NumberFormat('vi-VN').format(numAmount) + ' VNÄ';
            } catch (e) {
                return numAmount.toLocaleString('vi-VN') + ' VNÄ';
            }
        }

        // Show toast
        function showToast(message, emoji = 'ğŸ‰') {
            if (!toast || !toastMessage) return;
            toastMessage.textContent = message;
            const toastIcon = document.querySelector('.toast-icon');
            if (toastIcon) {
                toastIcon.textContent = emoji;
            }
            toast.classList.add('show');
            setTimeout(() => {
                if (toast) {
                    toast.classList.remove('show');
                }
            }, 3000);
        }

        // Initialize all dynamic content
        function init() {
            try {
                renderFloatingEmojis();
                startFallingEffects();
                renderProfile();
                renderDonationOptions();
                renderDonationList();
                renderFooter();
                renderSectionTitles();
                updateButtonText();

                // Modal event listeners
                const paymentModal = document.getElementById('paymentModal');
                const paymentModalClose = document.getElementById('paymentModalClose');
                const modalMomoOption = document.getElementById('modalMomoOption');
                const modalBankOption = document.getElementById('modalBankOption');

                // Close modal button
                if (paymentModalClose) {
                    paymentModalClose.addEventListener('click', () => {
                        hidePaymentModal();
                    });
                }

                // Close modal when clicking outside
                if (paymentModal) {
                    paymentModal.addEventListener('click', (e) => {
                        if (e.target === paymentModal) {
                            hidePaymentModal();
                        }
                    });
                }

                // MoMo option click
                if (modalMomoOption) {
                    modalMomoOption.addEventListener('click', () => {
                        const modalAmount = document.getElementById('modalAmount');
                        const amountText = modalAmount ? modalAmount.textContent : '';
                        // Extract amount from text (remove "VNÄ" and parse)
                        const amount = selectedAmount || 0;
                        modalMomoOption.style.borderColor = 'var(--primary)';
                        setTimeout(() => {
                            handlePaymentMethod('momo', amount);
                        }, 200);
                    });
                }

                // Bank option click
                if (modalBankOption) {
                    modalBankOption.addEventListener('click', () => {
                        const modalAmount = document.getElementById('modalAmount');
                        const amountText = modalAmount ? modalAmount.textContent : '';
                        // Extract amount from text (remove "VNÄ" and parse)
                        const amount = selectedAmount || 0;
                        modalBankOption.style.borderColor = 'var(--primary)';
                        handlePaymentMethod('bank', amount);
                    });
                }
            } catch (error) {
                console.error('Error initializing app:', error);
            }
        }

        // Run initialization
        init();

        // Donate button click - show payment modal
        if (donateBtn) {
            donateBtn.addEventListener('click', () => {
                if (!selectedAmount || selectedAmount < 1000) {
                    showToast('Vui lÃ²ng chá»n hoáº·c nháº­p sá»‘ tiá»n tá»« 1.000 VNÄ ğŸ§§', 'âš ï¸');
                    const customInput = document.getElementById('customAmountInput');
                    if (customInput && document.getElementById('btnCustomAmount').classList.contains('selected')) {
                        customInput.focus();
                    }
                    return;
                }
                showPaymentModal(selectedAmount);
            });
        }

        // Handle payment method selection in modal
        function handlePaymentMethod(method, amount) {
            // Get user input
            const nameInput = document.getElementById('donorName');
            const messageInput = document.getElementById('donorMessage');

            const name = nameInput && nameInput.value.trim() ? nameInput.value.trim() : "NhÃ  háº£o tÃ¢m";
            const message = messageInput && messageInput.value.trim() ? messageInput.value.trim() : "ÄÃ£ nuÃ´i báº¡n!";

            // Add to recent donations (Fake it for UI feedback)
            const newDonation = {
                avatar: "ğŸ˜º", // Default avatar for new donors
                name: name,
                message: message,
                amount: amount || selectedAmount || 0,
                time: new Date().toISOString()
            };

            // Add to beginning of list
            if (CONFIG.recentDonations) {
                CONFIG.recentDonations.unshift(newDonation);
                renderDonationList(); // Re-render list
            }

            if (method === 'bank') {
                // Show bank info in modal and hide selection
                const modalBankInfo = document.getElementById('modalBankInfo');
                const inputGroups = document.querySelectorAll('#paymentModal .input-group');
                const optionsArea = document.querySelector('.payment-modal-options');

                if (modalBankInfo) {
                    renderModalBankInfo(amount || selectedAmount || 0);
                    modalBankInfo.classList.add('show');

                    // Hide selection elements to save space
                    inputGroups.forEach(g => g.style.display = 'none');
                    if (optionsArea) optionsArea.style.display = 'none';
                }
            } else if (method === 'momo') {
                // MoMo payment
                const momoLink = getMoMoLink(amount || selectedAmount);
                if (momoLink) {
                    showToast(`Cáº£m Æ¡n ${name}! Äang má»Ÿ MoMo... ğŸ’œ`, 'ğŸ“±');
                    const newWindow = window.open(momoLink, '_blank');
                    if (!newWindow) {
                        showToast('Popup bá»‹ cháº·n, vui lÃ²ng cho phÃ©p popup', 'âš ï¸');
                    } else {
                        setTimeout(() => hidePaymentModal(), 1000);
                    }
                } else {
                    showToast('KhÃ´ng tÃ¬m tháº¥y link thanh toÃ¡n', 'âŒ');
                }
            }
        }

        // Fallback copy function
        function copyToClipboardFallback(text) {
            const textArea = document.createElement('textarea');
            textArea.value = text;
            textArea.style.position = 'fixed';
            textArea.style.opacity = '0';
            textArea.style.left = '-9999px';
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            try {
                const successful = document.execCommand('copy');
                if (successful) {
                    showToast('ÄÃ£ copy thÃ´ng tin tÃ i khoáº£n! ğŸ“‹', 'âœ…');
                } else {
                    showToast('Vui lÃ²ng copy thÃ´ng tin thá»§ cÃ´ng', 'âŒ');
                }
            } catch (err) {
                showToast('Vui lÃ²ng copy thÃ´ng tin thá»§ cÃ´ng', 'âŒ');
            }
            document.body.removeChild(textArea);
        }

        // Easter egg: Konami code
        let konamiCode = [];
        const konamiSequence = ['ArrowUp', 'ArrowUp', 'ArrowDown', 'ArrowDown', 'ArrowLeft', 'ArrowRight', 'ArrowLeft', 'ArrowRight', 'b', 'a'];

        document.addEventListener('keydown', (e) => {
            konamiCode.push(e.key);
            konamiCode = konamiCode.slice(-10);

            if (konamiCode.join(',') === konamiSequence.join(',')) {
                document.body.style.animation = 'rainbow 1s infinite';
                showToast('ğŸŒˆ RAINBOW MODE ACTIVATED! ğŸŒˆ', 'ğŸ®');

                // Add rainbow animation
                const style = document.createElement('style');
                style.textContent = `
                    @keyframes rainbow {
                        0% { filter: hue-rotate(0deg); }
                        100% { filter: hue-rotate(360deg); }
                    }
                `;
                document.head.appendChild(style);
            }
        });
    </script>
</body>

</html>